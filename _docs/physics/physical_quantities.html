

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Accessing Physical Quantities &mdash; TARDIS v1.5.dev2799</title>
  

  
  
    <link rel="shortcut icon" href="../_static/tardis_logo.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="TARDIS v1.5.dev2799" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> TARDIS
          

          
          </a>

          
            
            
              <div class="version">
                1.5.dev2799
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Accessing Physical Quantities</a><ul>
<li><a class="reference internal" href="#runing-in-interactive-python-session">Runing in interactive Python session</a></li>
<li><a class="reference internal" href="#examples-of-finding-physical-quantities">Examples of finding physical quantities</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">TARDIS</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Accessing Physical Quantities</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/physics/physical_quantities.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

/* nice headers on first paragraph of info/warning boxes */
.admonition .first {
    margin: -12px;
    padding: 6px 12px;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1;
    display: block;
}
.admonition.warning .first {
    background: #f0b37e;
}
.admonition.note .first {
    background: #6ab0de;
}
.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="accessing-physical-quantities">
<span id="physical-quantities"></span><h1>Accessing Physical Quantities<a class="headerlink" href="#accessing-physical-quantities" title="Permalink to this headline">¶</a></h1>
<p>In order to compute the synthetic spectrum, Tardis must either be told
or must calculate many physical properties of the model. To understand and
test the code it can be important to look at these values. One
easy way to do this is to run Tardis in an interactive mode and then
inspect the model properties.</p>
<div class="section" id="runing-in-interactive-python-session">
<h2>Runing in interactive Python session<a class="headerlink" href="#runing-in-interactive-python-session" title="Permalink to this headline">¶</a></h2>
<p>With iPython installed launch a session using</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>ipython --pylab
</pre></div>
</div>
<p>and then run your calculation, which is based on your &#8220;my_config.yml&#8221; file</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tardis</span> <span class="kn">import</span> <span class="n">run_tardis</span>


<span class="n">model</span> <span class="o">=</span> <span class="n">run_tardis</span><span class="p">(</span><span class="s1">&#39;myconfig.yml&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If all goes well, the simulation should run as usual. Afterwards, the
information from the simulation will all exist in &#8220;radial1d&#8221; and
can be examined. Some examples for useful/interesting quantities are
given below (but much more information is available: contact us via
<a class="reference external" href="http://groups.google.com/forum/#!forum/tardis-sn-users">tardis-sn-users</a> if you need
further help).</p>
</div>
<div class="section" id="examples-of-finding-physical-quantities">
<h2>Examples of finding physical quantities<a class="headerlink" href="#examples-of-finding-physical-quantities" title="Permalink to this headline">¶</a></h2>
<p>For example, two of our important quantities are the parameters of the
radiation field model, <span class="math">\(T_{\rm rad}\)</span> and <span class="math">\(W\)</span>. These exist
as Astropy <a class="reference external" href="http://astropy.readthedocs.org/en/v0.2.1/_generated/astropy.units.quantity.Quantity.html">Quantities</a>. Thus</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">t_rad</span><span class="o">.</span><span class="n">cgs</span>
</pre></div>
</div>
<p>will give you a list of the <span class="math">\(T_{\rm rad}\)</span>-values for the model zones
in cgs units. To obtain an array of the values (without units) use</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">t_rad</span><span class="o">.</span><span class="n">cgs</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
<p>Similarly, the <span class="math">\(W\)</span>-values can be accessed using</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">cgs</span>
</pre></div>
</div>
<p>Several important quantities that were setup when the model was defined
by the configuration file are located in the &#8220;tardis_config&#8221;
section. For example, the inner and outer velocity boundaries of the
zones in the model</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">tardis_config</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">v_inner</span><span class="o">.</span><span class="n">cgs</span>
<span class="n">model</span><span class="o">.</span><span class="n">tardis_config</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">v_outer</span><span class="o">.</span><span class="n">cgs</span>
</pre></div>
</div>
<p>and the average density in the zones</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">tardis_config</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">mean_densities</span><span class="o">.</span><span class="n">cgs</span>
</pre></div>
</div>
<p>Many other interesting quantities are stored in the
&#8220;plasma_array&#8221;. For example the calculated ion populations or level
populations:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">plasma_array</span><span class="o">.</span><span class="n">ion_populations</span>
<span class="n">model</span><span class="o">.</span><span class="n">plasma_array</span><span class="o">.</span><span class="n">level_populations</span>
</pre></div>
</div>
<p>These are stored as Pandas <a class="reference external" href="http://pandas.pydata.org/pandas-docs/version/0.13.1/generated/pandas.DataFrame.html">DataFrames</a>.
An index can be supplied to obtain the population in a particular
zone. E.g., for the ion populations of the innermost zone (index = 0)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">plasma_array</span><span class="o">.</span><span class="n">ion_populations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>Ion populations for a particular ionization stage of a particular
element can be accessed by specifying an appropriate tuple <span class="math">\((Z,C)\)</span>, which
identifies the element (via atomic number <span class="math">\(Z\)</span> ) and the charge
(via the ion charge <span class="math">\(C\)</span> ). Thus,</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">plasma_array</span><span class="o">.</span><span class="n">ion_populations</span><span class="o">.</span><span class="n">ix</span><span class="p">[(</span><span class="mi">14</span><span class="p">,</span><span class="mi">1</span><span class="p">)]</span>
</pre></div>
</div>
<p>will identify the ion popuations for  Si II (<span class="math">\(Z=14, C=1\)</span>) in all
the zones. The above examples can be combined to obtain e.g. the Si II
population in the innermost zone</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">plasma_array</span><span class="o">.</span><span class="n">ion_populations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">ix</span><span class="p">[(</span><span class="mi">14</span><span class="p">,</span><span class="mi">1</span><span class="p">)]</span>
</pre></div>
</div>
<p>The level populations are stored (and can be accessed) in a similar
way - a third label can be used to pick out a particular atomic
level. E.g., to pull out the population of the ground state (index 0)
of Si II</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">plasma_array</span><span class="o">.</span><span class="n">level_populations</span><span class="o">.</span><span class="n">ix</span><span class="p">[(</span><span class="mi">14</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you prefer to work in SI units, all the astropy Quantities may
instead by accessed with &#8220;xxx.si&#8221;.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Information that is not stored as astropy Quantities (e.g. the ion
an level populations used in the example above) are usually stored
in cgs units (i.e. <span class="math">\({\rm cm}^{-3}\)</span> for the populations).</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, TARDIS team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.5.dev2799',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>